<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–û—à–∏–±–∫–∞ –¥–æ—Å—Ç—É–ø–∞ - SecureChat Pro</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            color: #e1e1e1;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .error-container {
            max-width: 500px;
            padding: 40px;
            background: rgba(45, 45, 45, 0.9);
            border: 1px solid #404040;
            border-radius: 12px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .error-icon {
            font-size: 64px;
            margin-bottom: 20px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        h1 {
            font-size: 28px;
            color: #ff4444;
            margin-bottom: 16px;
            font-weight: 600;
        }

        .error-message {
            font-size: 16px;
            color: #ccc;
            margin-bottom: 30px;
            line-height: 1.5;
        }

        .error-code {
            font-family: monospace;
            font-size: 14px;
            color: #888;
            margin-bottom: 30px;
            padding: 10px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 4px;
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            text-decoration: none;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: #0078d4;
            color: white;
        }

        .btn-primary:hover {
            background: #106ebe;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: #666;
            color: white;
        }

        .btn-secondary:hover {
            background: #777;
        }

        .help-text {
            margin-top: 30px;
            font-size: 12px;
            color: #888;
            line-height: 1.4;
        }

        .help-text a {
            color: #0078d4;
            text-decoration: none;
        }

        .help-text a:hover {
            text-decoration: underline;
        }

        @media (max-width: 480px) {
            .error-container {
                margin: 20px;
                padding: 30px 20px;
            }

            .action-buttons {
                flex-direction: column;
            }

            .btn {
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="error-container">
        <div class="error-icon">üîí</div>
        <h1>–û—à–∏–±–∫–∞ –¥–æ—Å—Ç—É–ø–∞</h1>
        <div class="error-message" id="errorMessage">
            –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ SecureChat Pro. 
            –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –∞–¥—Ä–µ—Å–∞ –∏–ª–∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.
        </div>
        <div class="error-code" id="errorCode">
            ERROR_CODE: UNKNOWN
        </div>
        
        <div class="action-buttons">
            <a href="/" class="btn btn-primary">
                üè† –ù–∞ –≥–ª–∞–≤–Ω—É—é
            </a>
            <button onclick="location.reload()" class="btn btn-secondary">
                üîÑ –û–±–Ω–æ–≤–∏—Ç—å
            </button>
        </div>

        <div class="help-text">
            <strong>–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:</strong><br>
            ‚Ä¢ –ù–µ–≤–µ—Ä–Ω—ã–π –∞–¥—Ä–µ—Å —Å—Ç—Ä–∞–Ω–∏—Ü—ã<br>
            ‚Ä¢ –í—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å —Å–µ—Ä–≤–µ—Ä–æ–º<br>
            ‚Ä¢ –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ç—Ä–µ–±—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏<br>
            ‚Ä¢ –ü—Ä–æ–±–ª–µ–º—ã —Å SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–º<br><br>
            
            <strong>–ß—Ç–æ –¥–µ–ª–∞—Ç—å:</strong><br>
            ‚Ä¢ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–¥—Ä–µ—Å –≤ –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–µ<br>
            ‚Ä¢ –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ JavaScript –≤–∫–ª—é—á–µ–Ω<br>
            ‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –±—Ä–∞—É–∑–µ—Ä<br>
            ‚Ä¢ –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ—Ç–∫—Ä—ã—Ç—å –≤ —Ä–µ–∂–∏–º–µ –∏–Ω–∫–æ–≥–Ω–∏—Ç–æ<br><br>
            
            –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è, –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É.
        </div>
    </div>

    <script>
        // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø –æ—à–∏–±–∫–∏ –ø–æ URL –∏–ª–∏ –∫–æ–¥—É —Å–æ—Å—Ç–æ—è–Ω–∏—è
        function detectErrorType() {
            const url = window.location.href;
            const errorCode = document.getElementById('errorCode');
            const errorMessage = document.getElementById('errorMessage');
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
            const urlParams = new URLSearchParams(window.location.search);
            const error = urlParams.get('error');
            
            if (url.includes('403') || error === '403') {
                errorCode.textContent = 'ERROR_CODE: 403 FORBIDDEN';
                errorMessage.textContent = '–î–æ—Å—Ç—É–ø –∫ —ç—Ç–æ–º—É —Ä–µ—Å—É—Ä—Å—É –∑–∞–ø—Ä–µ—â–µ–Ω. –£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã.';
            } else if (url.includes('404') || error === '404') {
                errorCode.textContent = 'ERROR_CODE: 404 NOT FOUND';
                errorMessage.textContent = '–ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞. –í–æ–∑–º–æ–∂–Ω–æ, –æ–Ω–∞ –±—ã–ª–∞ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∞ –∏–ª–∏ —É–¥–∞–ª–µ–Ω–∞.';
            } else if (url.includes('500') || error === '500') {
                errorCode.textContent = 'ERROR_CODE: 500 INTERNAL ERROR';
                errorMessage.textContent = '–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞. –ú—ã —Ä–∞–±–æ—Ç–∞–µ–º –Ω–∞–¥ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ–º –ø—Ä–æ–±–ª–µ–º—ã.';
            } else if (url.includes('502') || error === '502') {
                errorCode.textContent = 'ERROR_CODE: 502 BAD GATEWAY';
                errorMessage.textContent = '–°–µ—Ä–≤–µ—Ä –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç.';
            } else if (url.includes('503') || error === '503') {
                errorCode.textContent = 'ERROR_CODE: 503 SERVICE UNAVAILABLE';
                errorMessage.textContent = '–°–µ—Ä–≤–∏—Å –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑-–∑–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è.';
            } else {
                errorCode.textContent = 'ERROR_CODE: UNKNOWN_ERROR';
                errorMessage.textContent = '–ü—Ä–æ–∏–∑–æ—à–ª–∞ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ SecureChat Pro.';
            }
        }

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–¥–¥–µ—Ä–∂–∫—É –±—Ä–∞—É–∑–µ—Ä–∞
        function checkBrowserSupport() {
            const features = {
                crypto: !!window.crypto,
                localStorage: !!window.localStorage,
                fetch: !!window.fetch,
                es6: (function() {
                    try {
                        eval('const x = () => {};');
                        return true;
                    } catch (e) {
                        return false;
                    }
                })()
            };

            const unsupported = Object.entries(features)
                .filter(([key, supported]) => !supported)
                .map(([key]) => key);

            if (unsupported.length > 0) {
                const errorMessage = document.getElementById('errorMessage');
                errorMessage.innerHTML = `
                    <strong>–í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:</strong><br>
                    ${unsupported.join(', ')}<br><br>
                    –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –±—Ä–∞—É–∑–µ—Ä:<br>
                    Chrome 80+, Firefox 75+, Safari 13+, Edge 80+
                `;
                
                document.getElementById('errorCode').textContent = 'ERROR_CODE: BROWSER_UNSUPPORTED';
            }
        }

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 30 —Å–µ–∫—É–Ω–¥ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
        function startAutoRedirect() {
            let countdown = 30;
            const redirectBtn = document.querySelector('.btn-primary');
            const originalText = redirectBtn.textContent;
            
            const timer = setInterval(() => {
                countdown--;
                redirectBtn.innerHTML = `üè† –ù–∞ –≥–ª–∞–≤–Ω—É—é (${countdown}—Å)`;
                
                if (countdown <= 0) {
                    clearInterval(timer);
                    window.location.href = '/';
                }
            }, 1000);
            
            // –û—Ç–º–µ–Ω—è–µ–º –∞–≤—Ç–æ–ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –∫–ª–∏–∫–µ
            redirectBtn.addEventListener('click', () => {
                clearInterval(timer);
                redirectBtn.textContent = originalText;
            });
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', function() {
            detectErrorType();
            checkBrowserSupport();
            
            // –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –∞–≤—Ç–æ–ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:
            // startAutoRedirect();
            
            // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–∫–∏ (—Ç–æ–ª—å–∫–æ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏)
            console.error('SecureChat Pro Error Page:', {
                url: window.location.href,
                userAgent: navigator.userAgent,
                timestamp: new Date().toISOString()
            });
        });

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∞–≤–∏—à
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' || e.key === ' ') {
                window.location.href = '/';
            } else if (e.key === 'r' || e.key === 'R') {
                location.reload();
            }
        });
    </script>
</body>
</html>
